<!DOCTYPE html>
<html lang="en">

    <head>
        <!-- <%- include("header.ejs"); %> -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>


    </head>
    
    <style>    
        table, th, td, tr {    
            border: 1px solid black;  
            border-collapse: collapse;    
            width: 50px;  
            text-align: center;  
            font-size: 20px;  
            margin-left: auto;
            margin-right: auto;
            max-width: 1000px;
            margin: 0 auto;
            float: none;
        }    

       
        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        li {
            float: left;
        }

        li a {
            display: block;
            padding: 8px;
        }
    </style>    

    <body style="background-image: url(); margin-top: 100px">
        
        <div style="display: flex; justify-content: center;">
            <div>
                <ul class="nav nav-tabs" >
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" onClick="visibility('UpcomingAppointements', 'HistoryAppointements', 'Calendar');">Επερχόμενα Ραντεβού</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" onClick="visibility('HistoryAppointements','UpcomingAppointements', 'Calendar');">Ιστορικό Ραντεβού</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" onClick="visibility('Calendar', 
                        'HistoryAppointements','UpcomingAppointements');">Ημερολόγιο</a>
                    </li>
                </ul>
            </div>           
        </div>                        
        

        <div id = "UpcomingAppointements" style="margin-top: 50px;">
            <table class="table table-striped" id="upcomingDocTable">
                <thead>
                  <tr>
                    <!-- <th scope="col">#</th> -->
                    <th scope="col">Ονομα</th>
                    <th scope="col">Επώνυμο</th>
                    <th scope="col">Ημερομηνία</th>
                    <th scope="col">Ώρα</th>
                  </tr>
                </thead>
              </table>
        </div>
       

        <div id = "HistoryAppointements" style="margin-top: 50px; display: none;">
            <table class="table table-striped" id="historyDocTable">
              <thead>
                <tr>
                  <!-- <th scope="col">#</th> -->
                  <th scope="col">Ονομα</th>
                  <th scope="col">Επώνυμο</th>
                  <th scope="col">Ημερομηνία</th>
                  <th scope="col">Ώρα</th>
                </tr>
              </thead>
            </table>
        </div>
        
                                   
        <div id="Calendar" style= "display: none; margin-top: 50px; margin-bottom: 100px;">
            <iframe style="justify-content:center; height: 700px; width: 1500px;  display: flex;" src="testcalend.html" seamless></iframe>
        </div>
           
    </body>

    <script>
    //   var historyAppointments =
    // [   
    //     {
    //         "patientFirstname":"Kalli",
    //         "patientLastname":"Giannikoglou",
    //         "date":"2023-06-15T08:39:43.907+00:00"
    //     },
    //     {
    //         "patientFirstname":"Ilias",
    //         "patientLastname":"Lagomatis",
    //         "date":"2023-05-24T08:39:43.907+00:00"
    //     },
    //     {
    //         "patientFirstname":"Anastasia",
    //         "patientLastname":"Mallikopoulou",
    //         "date":"2023-05-24T08:39:43.907+00:00"
    //     }
    // ]
    
    // var incomingAppointments = 
    // [
    //     {
    //         "patientFirstname": "Ilias",
    //         "patientLastname": "Lagomatis",
    //         "date": "Sept 24, 23 13:20:18"
    //     },
    //     {
    //         "patientFirstname": "Anastasia",
    //         "patientLastname": "Mallikopoulou",
    //         "date": "2023-05-24T08:44:19.741+00:00"
    //     }
    // ]

    //   //separate time from DateTime object as hh:mm:ss
    //   export function formatTime(date){
    //     var hours = String(date.getHours()).padStart(2, '0');
    //     var min = String(date.getMinutes()).padStart(2, '0');
    //     var sec = String(date.getSeconds()).padStart(2, '0');

    //     return hours + ":" +  min + ":" + sec;
    //   }

    //   //separate date from DateTime object as dd/mm/yyyy
    //   export function formatDate(date){
    //     var day = String(date.getDate()).padStart(2, '0');
    //     var month = String(date.getMonth()).padStart(2, '0');
    //     var year = String(date.getFullYear()).padStart(4, '0');

    //     return day + "/" +  month + "/" + year;
    //   }

      //function to load the data of the upcomingAppointments table
    //   incomingAppointments.forEach(element => { 

    //     var tableRow = document.getElementById("upcomingDocTable");
    //     //add new row at the end
    //     var row = tableRow.insertRow(-1);
    //     //create 4 new cells
    //     var cell1 = row.insertCell(0);
    //     var cell2 = row.insertCell(1);
    //     var cell3 = row.insertCell(2);
    //     var cell4 = row.insertCell(3);

    //     //load data to the cells
    //     cell1.innerHTML = element.patientFirstname;
    //     cell2.innerHTML = element.patientLastname;
    //     var date = new Date(element.date);
    //     cell3.innerHTML = formatDate(date);
    //     cell4.innerHTML = formatTime(date);

    //   });

      //Me history den doyleuei!

      //function to load the data of the upcomingAppointments table
      historyAppointments.forEach(element => { 
        
        var tableRow = document.getElementById("historyDocTable");
        console.log(tableRow)
        //add new row at the end
        var row = tableRow.insertRow(-1);
        //create 4 new cells
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);

        //load data to the cells
        cell1.innerHTML = element.patientFirstname;
        cell2.innerHTML = element.patientLastname;
        var date = new Date(element.date);
        cell3.innerHTML = formatDate(date);
        cell4.innerHTML = formatTime(date);

      });
  
      //function to display and hide changing tabs
      function visibility(idVisible, idInvisible1, idInvisible2){
          document.getElementById(idVisible).style.display="block";
          document.getElementById(idInvisible1).style.display="none";
          document.getElementById(idInvisible2).style.display="none";
      }


    </script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="restapi/doctorIncomingAppointments.js"></script>
    <script src="restapi/doctorAppointmentsHistory.js"></script>
    
</html>